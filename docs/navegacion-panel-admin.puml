@startuml NavegaciÃ³n Panel Administrativo
!theme plain
skinparam backgroundColor #FFFFFF
skinparam shadowing false

title Sistema de GestiÃ³n Hotelera\nDiagrama de NavegaciÃ³n - Panel Administrativo (Filament)

' Estilos
skinparam state {
  BackgroundColor<<dashboard>> #673AB7
  BackgroundColor<<rooms>> #3F51B5
  BackgroundColor<<bookings>> #009688
  BackgroundColor<<payments>> #4CAF50
  BackgroundColor<<customers>> #FF9800
  BackgroundColor<<config>> #9E9E9E
  BackgroundColor<<system>> #607D8B
  FontColor white
}

[*] --> login

state "ğŸ” Login Administrador" as login {
  login : - Email / ContraseÃ±a
  login : - AutenticaciÃ³n con guard 'web'
  login : - VerificaciÃ³n de permisos
}

login --> dashboard : Login exitoso

state "ğŸ“Š DASHBOARD" as dashboard <<dashboard>> {
  dashboard : **Widgets principales:**
  dashboard : - EstadÃ­sticas de reservas
  dashboard : - OcupaciÃ³n actual
  dashboard : - Ingresos del mes
  dashboard : - Reservas pendientes
  dashboard : - Check-ins de hoy
  dashboard : - Check-outs de hoy
  dashboard : - GrÃ¡ficos de tendencias
  --
  dashboard : **Acceso rÃ¡pido:**
  dashboard : - Nueva reserva
  dashboard : - Ver calendario
  dashboard : - Pagos pendientes
}

' ============================================
' MÃ“DULO DE HABITACIONES
' ============================================

state "GESTIÃ“N DE HABITACIONES" as rooms_module <<rooms>> {

  state "ğŸ¨ Tipos de HabitaciÃ³n" as room_types {
    state "Lista de Tipos" as rt_list {
      rt_list : - Tabla con filtros
      rt_list : - BÃºsqueda
      rt_list : - Estado (activo/inactivo)
      rt_list : - Acciones en masa
    }

    state "Crear/Editar Tipo" as rt_form {
      rt_form : **Formulario:**
      rt_form : - InformaciÃ³n bÃ¡sica
      rt_form : - Slug (auto)
      rt_form : - DescripciÃ³n
      rt_form : - Capacidad y precios
      rt_form : - Facilidades (relaciÃ³n)
      rt_form : - Tipos de cama (relaciÃ³n)
      rt_form : - GalerÃ­a de imÃ¡genes
      rt_form : - Estado
    }

    state "Ver Detalle Tipo" as rt_view {
      rt_view : - InformaciÃ³n completa
      rt_view : - Habitaciones asociadas
      rt_view : - Reservas activas
      rt_view : - EstadÃ­sticas
    }

    rt_list --> rt_form : Crear/Editar
    rt_list --> rt_view : Ver
    rt_form --> rt_list : Guardar
    rt_view --> rt_form : Editar
  }

  state "ğŸšª Habitaciones" as rooms {
    state "Lista de Habitaciones" as r_list {
      r_list : - Filtro por tipo
      r_list : - Filtro por piso
      r_list : - Filtro por estado
      r_list : - BÃºsqueda por nÃºmero
    }

    state "Crear/Editar HabitaciÃ³n" as r_form {
      r_form : - NÃºmero de habitaciÃ³n
      r_form : - Tipo de habitaciÃ³n
      r_form : - Piso
      r_form : - Estado
      r_form : - Preferencia fumar
    }

    state "Ver Disponibilidad" as r_calendar {
      r_calendar : - Vista de calendario
      r_calendar : - Reservas por habitaciÃ³n
      r_calendar : - Mantenimientos
    }

    r_list --> r_form : Crear/Editar
    r_list --> r_calendar : Ver calendario
    r_form --> r_list : Guardar
  }

  state "ğŸ›ï¸ Tipos de Cama" as bed_types {
    bed_types : - Lista CRUD simple
    bed_types : - Nombre y capacidad
    bed_types : - Icono (opcional)
  }

  state "âœ¨ Facilidades" as facilities {
    facilities : - Lista CRUD simple
    facilities : - Nombre
    facilities : - Icono (opcional)
  }
}

' ============================================
' MÃ“DULO DE RESERVAS
' ============================================

state "GESTIÃ“N DE RESERVAS" as bookings_module <<bookings>> {

  state "ğŸ“… Lista de Reservas" as bookings_list {
    bookings_list : **Filtros:**
    bookings_list : - Estado
    bookings_list : - Fechas
    bookings_list : - Cliente
    bookings_list : - NÃºmero de referencia
    bookings_list : - Estado de pago
    --
    bookings_list : **Vistas:**
    bookings_list : - Tabla
    bookings_list : - Calendario
    --
    bookings_list : **Acciones:**
    bookings_list : - Ver detalle
    bookings_list : - Editar
    bookings_list : - Cambiar estado
    bookings_list : - Imprimir
  }

  state "â• Nueva Reserva" as new_booking {
    new_booking : **Paso 1: Disponibilidad**
    new_booking : - Fechas
    new_booking : - Tipo de habitaciÃ³n
    new_booking : - Verificar disponibilidad
    --
    new_booking : **Paso 2: Datos**
    new_booking : - Buscar/crear cliente
    new_booking : - HuÃ©spedes
    new_booking : - Plan de comidas
    new_booking : - Solicitudes especiales
    --
    new_booking : **Paso 3: ConfirmaciÃ³n**
    new_booking : - Asignar habitaciones
    new_booking : - Calcular precio
    new_booking : - Ajuste manual (opcional)
    new_booking : - Guardar
  }

  state "ğŸ” Ver Detalle Reserva" as booking_view {
    booking_view : **InformaciÃ³n:**
    booking_view : - Datos del cliente
    booking_view : - Habitaciones asignadas
    booking_view : - Fechas y huÃ©spedes
    booking_view : - Plan de comidas
    booking_view : - Precio total
    --
    booking_view : **Historial:**
    booking_view : - Cambios de estado
    booking_view : - Pagos realizados
    booking_view : - Cargos extra
    --
    booking_view : **Acciones:**
    booking_view : - Cambiar estado
    booking_view : - Agregar pago
    booking_view : - Agregar cargo
    booking_view : - Editar
    booking_view : - Cancelar
    booking_view : - Imprimir voucher
  }

  state "âœï¸ Editar Reserva" as edit_booking {
    edit_booking : - Modificar fechas
    edit_booking : - Cambiar habitaciones
    edit_booking : - Actualizar huÃ©spedes
    edit_booking : - Ajustar precio
    edit_booking : - Solicitudes especiales
  }

  state "ğŸ“† Vista Calendario" as calendar {
    calendar : - Vista mensual/semanal
    calendar : - Reservas por dÃ­a
    calendar : - Check-ins/Check-outs
    calendar : - OcupaciÃ³n visual
    calendar : - Filtros por habitaciÃ³n
    calendar : - Click para crear reserva
  }

  bookings_list --> booking_view : Ver
  bookings_list --> edit_booking : Editar
  bookings_list --> calendar : Vista calendario
  bookings_list --> new_booking : Nueva reserva

  booking_view --> edit_booking : Editar
  booking_view --> payments_module : Agregar pago
  booking_view --> bookings_list : Volver

  new_booking --> bookings_list : Guardar
  edit_booking --> booking_view : Guardar
  calendar --> new_booking : Nueva reserva
}

' ============================================
' MÃ“DULO DE PAGOS
' ============================================

state "GESTIÃ“N DE PAGOS" as payments_module <<payments>> {

  state "ğŸ’³ Lista de Pagos" as payments_list {
    payments_list : **Filtros:**
    payments_list : - Estado
    payments_list : - MÃ©todo de pago
    payments_list : - Tipo (deposit/full/refund)
    payments_list : - Fechas
    payments_list : - Reserva
    --
    payments_list : **InformaciÃ³n:**
    payments_list : - NÃºmero de pago
    payments_list : - Monto
    payments_list : - Cliente
    payments_list : - Estado
  }

  state "â• Registrar Pago" as new_payment {
    new_payment : - Seleccionar reserva
    new_payment : - Tipo de pago
    new_payment : - MÃ©todo
    new_payment : - Monto
    new_payment : - Referencia
    new_payment : - Notas
    new_payment : - Fecha de pago
  }

  state "ğŸ” Ver Detalle Pago" as payment_view {
    payment_view : - InformaciÃ³n completa
    payment_view : - Datos de la reserva
    payment_view : - QR info (si aplica)
    payment_view : - Descargar recibo
    payment_view : - Imprimir
  }

  state "â†©ï¸ Reembolsos" as refunds {
    refunds : - Lista de reembolsos
    refunds : - Procesar nuevo reembolso
    refunds : - Estado de reembolsos
  }

  payments_list --> payment_view : Ver
  payments_list --> new_payment : Nuevo pago
  payments_list --> refunds : Reembolsos

  new_payment --> payments_list : Guardar
  payment_view --> payments_list : Volver
}

' ============================================
' MÃ“DULO DE CLIENTES
' ============================================

state "GESTIÃ“N DE CLIENTES" as customers_module <<customers>> {

  state "ğŸ‘¥ Lista de Clientes" as customers_list {
    customers_list : **Filtros:**
    customers_list : - Estado
    customers_list : - PaÃ­s
    customers_list : - Verificado
    customers_list : - BÃºsqueda por nombre/email
    --
    customers_list : **InformaciÃ³n:**
    customers_list : - Nombre completo
    customers_list : - Email / TelÃ©fono
    customers_list : - Total de reservas
    customers_list : - Estado
  }

  state "ğŸ” Ver Cliente" as customer_view {
    customer_view : **InformaciÃ³n personal:**
    customer_view : - Datos completos
    customer_view : - PaÃ­s
    customer_view : - Verificaciones
    --
    customer_view : **Historial:**
    customer_view : - Reservas (todas)
    customer_view : - Total gastado
    customer_view : - Ãšltima visita
    --
    customer_view : **Acciones:**
    customer_view : - Editar informaciÃ³n
    customer_view : - Nueva reserva
    customer_view : - Enviar email
  }

  state "âœï¸ Editar Cliente" as customer_edit {
    customer_edit : - InformaciÃ³n personal
    customer_edit : - Email / TelÃ©fono
    customer_edit : - PaÃ­s
    customer_edit : - Estado
    customer_edit : - Restablecer contraseÃ±a
  }

  customers_list --> customer_view : Ver
  customer_view --> customer_edit : Editar
  customer_view --> new_booking : Nueva reserva
  customer_edit --> customer_view : Guardar
}

' ============================================
' MÃ“DULO DE CONFIGURACIÃ“N
' ============================================

state "CONFIGURACIÃ“N" as config_module <<config>> {

  state "ğŸ½ï¸ Planes de Comida" as meal_plans {
    meal_plans : - Lista CRUD
    meal_plans : - CÃ³digo y nombre
    meal_plans : - DescripciÃ³n
    meal_plans : - Precios (adulto/niÃ±o/bebÃ©)
    meal_plans : - Estado activo
  }

  state "ğŸ“‹ Reglas de CancelaciÃ³n" as cancellation_rules {
    cancellation_rules : - Lista de reglas
    cancellation_rules : - DÃ­as antes del check-in
    cancellation_rules : - Porcentaje de penalidad
    cancellation_rules : - DescripciÃ³n
  }

  state "ğŸŒ PaÃ­ses" as countries {
    countries : - Lista CRUD simple
    countries : - Nombre
    countries : - CÃ³digo corto
  }

  state "âš™ï¸ ConfiguraciÃ³n General" as settings {
    settings : - Datos del hotel
    settings : - PolÃ­ticas generales
    settings : - ConfiguraciÃ³n de email
    settings : - Pasarelas de pago
    settings : - Idioma y moneda
  }
}

' ============================================
' MÃ“DULO DE SISTEMA
' ============================================

state "SISTEMA" as system_module <<system>> {

  state "ğŸ‘¤ Usuarios Admin" as users {
    state "Lista Usuarios" as users_list {
      users_list : - Filtro por rol
      users_list : - Estado
      users_list : - BÃºsqueda
    }

    state "Crear/Editar Usuario" as user_form {
      user_form : - InformaciÃ³n personal
      user_form : - Email / ContraseÃ±a
      user_form : - Roles asignados
      user_form : - Permisos directos
      user_form : - Super Admin (checkbox)
    }

    users_list --> user_form : Crear/Editar
    user_form --> users_list : Guardar
  }

  state "ğŸ” Roles y Permisos" as roles {
    state "Lista de Roles" as roles_list {
      roles_list : - Roles del sistema
      roles_list : - Guard name
      roles_list : - Permisos asignados
    }

    state "Crear/Editar Rol" as role_form {
      role_form : - Nombre del rol
      role_form : - Guard name
      role_form : - Seleccionar permisos
      role_form : - MenÃºs visibles
    }

    state "Lista de Permisos" as permissions_list {
      permissions_list : - Todos los permisos
      permissions_list : - Agrupados por recurso
      permissions_list : - CRUD bÃ¡sico
    }

    roles_list --> role_form : Crear/Editar
    roles_list --> permissions_list : Ver permisos
    role_form --> roles_list : Guardar
  }

  state "ğŸ“± MenÃºs" as menus {
    state "Lista de MenÃºs" as menus_list {
      menus_list : - Estructura jerÃ¡rquica
      menus_list : - Orden
      menus_list : - Estado (activo)
    }

    state "Crear/Editar MenÃº" as menu_form {
      menu_form : - Nombre
      menu_form : - Ruta
      menu_form : - Icono
      menu_form : - Padre (para submenÃºs)
      menu_form : - Orden
      menu_form : - Roles con acceso
      menu_form : - Estado
    }

    menus_list --> menu_form : Crear/Editar
    menu_form --> menus_list : Guardar
  }

  state "ğŸ“Š EstadÃ­sticas y Analytics" as analytics {
    analytics : - Visitas a pÃ¡ginas (PageView)
    analytics : - PÃ¡ginas mÃ¡s visitadas
    analytics : - Tendencias de reservas
    analytics : - Reportes financieros
    analytics : - OcupaciÃ³n histÃ³rica
    analytics : - Exportar datos
  }
}

' ============================================
' NAVEGACIÃ“N DESDE DASHBOARD
' ============================================

dashboard --> rooms_module : "Habitaciones"
dashboard --> bookings_module : "Reservas"
dashboard --> payments_module : "Pagos"
dashboard --> customers_module : "Clientes"
dashboard --> config_module : "ConfiguraciÃ³n"
dashboard --> system_module : "Sistema"

' Acceso rÃ¡pido desde dashboard
dashboard --> new_booking : "Nueva Reserva (rÃ¡pido)"
dashboard --> calendar : "Ver Calendario"
dashboard --> bookings_list : "Reservas de hoy"

' NavegaciÃ³n entre mÃ³dulos relacionados
booking_view --> customer_view : Ver cliente
customer_view --> bookings_list : Ver todas sus reservas
booking_view --> payments_list : Ver pagos de la reserva

' Volver al dashboard
rooms_module --> dashboard : "Volver"
bookings_module --> dashboard : "Volver"
payments_module --> dashboard : "Volver"
customers_module --> dashboard : "Volver"
config_module --> dashboard : "Volver"
system_module --> dashboard : "Volver"

' ============================================
' SIDEBAR NAVIGATION
' ============================================

note top of dashboard
  **Sidebar Navigation (Filament):**
  ğŸ“Š Dashboard

  **Operaciones:**
  ğŸ“… Reservas
    - Lista
    - Calendario
    - Nueva reserva
  ğŸ’³ Pagos
  ğŸ‘¥ Clientes

  **Habitaciones:**
  ğŸ¨ Tipos de HabitaciÃ³n
  ğŸšª Habitaciones
  ğŸ›ï¸ Tipos de Cama
  âœ¨ Facilidades

  **ConfiguraciÃ³n:**
  ğŸ½ï¸ Planes de Comida
  ğŸ“‹ Reglas de CancelaciÃ³n
  ğŸŒ PaÃ­ses
  âš™ï¸ General

  **Sistema:**
  ğŸ‘¤ Usuarios
  ğŸ” Roles y Permisos
  ğŸ“± MenÃºs
  ğŸ“Š Analytics
end note

note bottom of system_module
  **Permisos por MÃ³dulo:**
  - view_any_{resource}
  - view_{resource}
  - create_{resource}
  - update_{resource}
  - delete_{resource}
  - delete_any_{resource}

  Los usuarios ven solo los
  menÃºs segÃºn sus permisos
end note

legend right
  |<back:#673AB7>     | Dashboard |
  |<back:#3F51B5>     | Habitaciones |
  |<back:#009688>     | Reservas |
  |<back:#4CAF50>     | Pagos |
  |<back:#FF9800>     | Clientes |
  |<back:#9E9E9E>     | ConfiguraciÃ³n |
  |<back:#607D8B>     | Sistema |
endlegend

@enduml
